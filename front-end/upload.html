<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="bootstrap-3.3.7-dist/css/bootstrap-theme.css">
  <link rel="stylesheet" href="bootstrap-3.3.7-dist/css/bootstrap.css">
  <link rel="stylesheet" href="bootstrap-3.3.7-dist/js/bootstrap.min.js">
  <script src="jquery-3.5.1.min.js"></script>
  <script src="vue.js"></script>
  <title>上传文件</title>
</head>

<body>
  <div id='app'>
    <form method="post" enctype="multipart/form-data" action="http://127.0.0.1:5000/file_upload/"
      onsubmit="return post_file()">

      <div class="form-group">
        <label for="exampleInputFile">File input</label>
        <input type="file" id="exampleInputFile">
      </div>

      <div class="checkbox" id='check_div'>

        <label v-for='tag in tags'>
          <input type="checkbox" :value="tag.tag_id"> {{ tag.tag_name }} &emsp;
        </label>
      </div>

      <button type="submit" class="btn btn-default">Submit</button>
    </form>
  </div>
</body>

<script>
  let app = new Vue({
    el: '#app',
    data: {
      message: 'Hello Vue!',
      tags: [{
        tag_name: 'lzk',
        tag_id: '1'
      }]
    }
  })

  $.get({
    url: 'http://127.0.0.1:5000/file_upload/',
    type: 'GET',
    async: false,
    success: function (data, status) {
      data = $.parseJSON(data);
      app.tags = data
    }
  })
  function post_file() {
    $.post(
      {
        url: 'http://127.0.0.1:5000/file_upload/',
        // traditional: true,
        data: {
          posts_tags: [1,2]
        },
        success: function (data, staus) {
          alert(data)
        }
      })
    return false
  }
</script>

</html>