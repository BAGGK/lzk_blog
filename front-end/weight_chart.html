<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="jquery-3.5.1.min.js"></script>
  <script src="echarts.min.js"></script>
  <script src="weight_chart.js"></script>
  <script src="global_var.js"></script>

  <title>Fitness</title>
</head>

<body>


  <div id="weight_echarts" style="width: 600px;height:400px;"></div>


<script>
  function input_weight(weight_num) {

    form_data = new FormData()
    form_data.append('input_weight', weight_num)
    post_data('/fitness/', form_data)
  }

</script>
<script>
    let data = get_data('/fitness/')
    create_echart(data['date'], data['weights'])

    let is_input = get_data('/is_fitness_input/')
    console.log(is_input)
    is_input = is_input == '1' ? true : false

    while(is_input == false){
      let weight_num = prompt('请输入体重：');
      
      if(/^\d+$/.test(weight_num)){
        input_weight(weight_num)
        is_input = true
      }
    }
</script>